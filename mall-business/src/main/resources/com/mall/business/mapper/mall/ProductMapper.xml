<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mall.business.mapper.mall.ProductMapper">
    <insert id="insert" parameterType="com.mall.entity.mall.ProductDO" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO mall_product
        <trim prefix="(" suffix=")" suffixOverrides=","> 
            <if test="id != null">id,</if>
            <if test="categoryId != null">category_id,</if>
            <if test="brandId != null">brand_id,</if>
            <if test="unitId != null">unit_id,</if>
            <if test="name != null and name != ''">name,</if>
            <if test="model != null and model != ''">model,</if>
            <if test="quantity != null">quantity,</if>
            <if test="price != null">price,</if>
            <if test="saleStatus != null">sale_status,</if>
            <if test="isHot != null">is_hot,</if>
            <if test="isRecommend != null">is_recommend,</if>
            <if test="createUserId != null">create_user_id,</if>
            <if test="createUserName != null and createUserName != ''">create_user_name,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateUserId != null">update_user_id,</if>
            <if test="updateUserName != null and updateUserName != ''">update_user_name,</if>
            <if test="updateTime != null">update_time,</if>
            <if test="isDel != null">is_del,</if>
         </trim>
        <trim prefix="VALUES (" suffix=")" suffixOverrides=","> 
            <if test="id != null">#{id},</if>
            <if test="categoryId != null">#{categoryId},</if>
            <if test="brandId != null">#{brandId},</if>
            <if test="unitId != null">#{unitId},</if>
            <if test="name != null and name != ''">#{name},</if>
            <if test="model != null and model != ''">#{model},</if>
            <if test="quantity != null">#{quantity},</if>
            <if test="price != null">#{price},</if>
            <if test="saleStatus != null">#{saleStatus},</if>
            <if test="isHot != null">#{isHot},</if>
            <if test="isRecommend != null">#{isRecommend},</if>
            <if test="createUserId != null">#{createUserId},</if>
            <if test="createUserName != null and createUserName != ''">#{createUserName},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateUserId != null">#{updateUserId},</if>
            <if test="updateUserName != null and updateUserName != ''">#{updateUserName},</if>
            <if test="updateTime != null">#{updateTime},</if>
            <if test="isDel != null">#{isDel},</if>
         </trim>
    </insert>

    <update id="update" parameterType="com.mall.entity.mall.ProductDO">
        UPDATE mall_product
        <set> 
            <if test="id != null"> id = #{id}, </if>
            <if test="categoryId != null"> category_id = #{categoryId}, </if>
            <if test="brandId != null"> brand_id = #{brandId}, </if>
            <if test="unitId != null"> unit_id = #{unitId}, </if>
            <if test="name != null and name != ''"> name = #{name}, </if>
            <if test="model != null and model != ''"> model = #{model}, </if>
            <if test="quantity != null"> quantity = #{quantity}, </if>
            <if test="price != null"> price = #{price}, </if>
            <if test="saleStatus != null"> sale_status = #{saleStatus}, </if>
            <if test="isHot != null"> is_hot = #{isHot}, </if>
            <if test="isRecommend != null"> is_recommend = #{isRecommend}, </if>
            <if test="createUserId != null"> create_user_id = #{createUserId}, </if>
            <if test="createUserName != null and createUserName != ''"> create_user_name = #{createUserName}, </if>
            <if test="createTime != null"> create_time = #{createTime}, </if>
            <if test="updateUserId != null"> update_user_id = #{updateUserId}, </if>
            <if test="updateUserName != null and updateUserName != ''"> update_user_name = #{updateUserName}, </if>
            <if test="updateTime != null"> update_time = #{updateTime}, </if>
            <if test="isDel != null"> is_del = #{isDel}, </if>
         </set>
        WHERE id = #{id}
    </update>

    <delete id="delete" parameterType="long">
        DELETE FROM mall_product
        WHERE id = #{id}
    </delete>

    <delete id="deleteByIds">
        DELETE FROM mall_product
        WHERE id IN
        <foreach collection="ids" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

    <select id="searchByCondition" parameterType="com.mall.dto.condition.mall.ProductConditionDTO"
    resultMap="ProductResultMap">
        SELECT
        <include refid="queryColumn"/>
        FROM mall_product
        <include refid="queryWhere"/>
    </select>

    <resultMap type="com.mall.entity.mall.ProductDO" id="ProductResultMap"> 
        <result property="id" column="id"/>
        <result property="categoryId" column="category_id"/>
        <result property="brandId" column="brand_id"/>
        <result property="unitId" column="unit_id"/>
        <result property="name" column="name"/>
        <result property="model" column="model"/>
        <result property="quantity" column="quantity"/>
        <result property="price" column="price"/>
        <result property="saleStatus" column="sale_status"/>
        <result property="isHot" column="is_hot"/>
        <result property="isRecommend" column="is_recommend"/>
        <result property="createUserId" column="create_user_id"/>
        <result property="createUserName" column="create_user_name"/>
        <result property="createTime" column="create_time"/>
        <result property="updateUserId" column="update_user_id"/>
        <result property="updateUserName" column="update_user_name"/>
        <result property="updateTime" column="update_time"/>
        <result property="isDel" column="is_del"/>
     </resultMap>

    <sql id="queryColumn"> 
        id,
        category_id,
        brand_id,
        unit_id,
        name,
        model,
        quantity,
        price,
        sale_status,
        is_hot,
        is_recommend,
        create_user_id,
        create_user_name,
        create_time,
        update_user_id,
        update_user_name,
        update_time,
        is_del
     </sql>

    <sql id="queryWhere">
        <where> 
            <if test="id != null"> and id = #{id} </if>
            <if test="categoryId != null"> and category_id = #{categoryId} </if>
            <if test="brandId != null"> and brand_id = #{brandId} </if>
            <if test="unitId != null"> and unit_id = #{unitId} </if>
            <if test="name != null and name != ''"> and name = #{name} </if>
            <if test="model != null and model != ''"> and model = #{model} </if>
            <if test="quantity != null"> and quantity = #{quantity} </if>
            <if test="price != null"> and price = #{price} </if>
            <if test="saleStatus != null"> and sale_status = #{saleStatus} </if>
            <if test="isHot != null"> and is_hot = #{isHot} </if>
            <if test="isRecommend != null"> and is_recommend = #{isRecommend} </if>
            <if test="createUserId != null"> and create_user_id = #{createUserId} </if>
            <if test="createUserName != null and createUserName != ''"> and create_user_name = #{createUserName} </if>
            <if test="createTime != null"> and create_time = #{createTime} </if>
            <if test="updateUserId != null"> and update_user_id = #{updateUserId} </if>
            <if test="updateUserName != null and updateUserName != ''"> and update_user_name = #{updateUserName} </if>
            <if test="updateTime != null"> and update_time = #{updateTime} </if>
            <if test="isDel != null"> and is_del = #{isDel} </if>
         </where>
    </sql>
</mapper>
